<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>StabMasterArson Enhancement Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: system-ui; margin: 0; padding: 0; background: #1b1b1b; color: #eee; }
header { background: #292929; padding: 10px; display: flex; align-items: center; justify-content: space-between; }
#offline { padding: 4px 8px; border-radius: 6px; font-size: 0.9em; }
#offline.on { background: #2ecc71; }
#offline.off { background: #e74c3c; }
#sidebar { width: 220px; background: #222; padding: 10px; float: left; height: 100vh; overflow-y: auto; }
#content { margin-left: 230px; padding: 20px; }
.tag { display: inline-block; margin: 2px; padding: 3px 8px; border-radius: 8px; font-size: 0.85em; }
.tag.AI { background: cyan; color: black; }
.tag.UI { background: orange; color: black; }
.tag.Performance { background: lime; color: black; }
.category { margin-top: 10px; cursor: pointer; font-weight: bold; }
.category-content { display: none; margin-left: 10px; }
.category.open .category-content { display: block; }
</style>
</head>
<body>
<header>
  <h2>⚙️ StabMasterArson Enhancement Portal</h2>
  <div id="offline" class="off">Offline Mode: OFF</div>
</header>
<div id="sidebar"></div>
<div id="content">Loading enhancements...</div>

<script>
async function loadJSONs() {
  let files = [];
  try {
    const resp = await fetch('./docs/manifest.json');
    const manifest = await resp.json();
    files = manifest.enhancements || [];
    localStorage.setItem('manifest', JSON.stringify(manifest));
    document.getElementById('offline').className = 'on';
    document.getElementById('offline').textContent = 'Offline Mode: ON';
  } catch {
    document.getElementById('offline').className = 'off';
    document.getElementById('offline').textContent = 'Offline Mode: OFF';
    const cached = localStorage.getItem('manifest');
    if (cached) files = JSON.parse(cached).enhancements;
  }
  render(files);
}

function render(files) {
  const sidebar = document.getElementById('sidebar');
  const content = document.getElementById('content');
  const tags = new Set(files.flatMap(e => e.tags || []));
  sidebar.innerHTML = '<h3>Tags</h3>' + [...tags].map(t => `<div class="tag ${t}">${t}</div>`).join('');
  content.innerHTML = files.map(e => `
    <div><h4>${e.name}</h4>
    <p>${e.description}</p>
    ${(e.tags || []).map(t => `<span class="tag ${t}">${t}</span>`).join(' ')}</div>`).join('<hr>');
}
loadJSONs
